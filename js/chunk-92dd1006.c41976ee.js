(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-92dd1006"],{"02b1":function(e,t,i){"use strict";var n=i("313c"),s=i.n(n);s.a},"2b83":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"design-wrapper",on:{click:e.mainClick}},[i("div",{staticClass:"design-header"},[i("a-button",{attrs:{icon:"left",type:"link"},on:{click:e.goback}}),i("a-input",{directives:[{name:"show",rawName:"v-show",value:e.editTitle,expression:"editTitle"}],ref:"title",staticClass:"title-input",on:{blur:e.titleInputBlur},model:{value:e.siteName,callback:function(t){e.siteName=t},expression:"siteName"}}),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.editTitle,expression:"!editTitle"}],staticClass:"title",on:{click:e.clickTitle}},[e._v(e._s(e.siteName))]),i("div",{staticClass:"auto-save-text",staticStyle:{"line-height":"33px"}},[e._v(e._s(e.autoSaveText))]),i("div",{staticClass:"blank"}),i("a-dropdown",{attrs:{trigger:["click"]}},[i("span",{staticClass:"dropdown-title"},[e._v("文件")]),i("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[i("a-sub-menu",{key:"1",attrs:{title:"新建"}},[i("a-menu-item",{key:"11"},[e._v("在线网页")]),i("a-menu-divider"),i("a-menu-item",{key:"12"},[e._v("最近文件1")]),i("a-menu-item",{key:"13"},[e._v("最近文件2")]),i("a-menu-item",{key:"14"},[e._v("最近文件3")]),i("a-menu-divider"),i("a-menu-item",{key:"15"},[e._v("导入JSON")])],1),i("a-menu-item",{key:"2"},[e._v("保存为模版")]),i("a-menu-divider"),i("a-menu-item",{key:"3"},[e._v("导出JSON")]),i("a-menu-item",{key:"4"},[e._v("发布")]),i("a-menu-item",{key:"5"},[e._v("生成图片")]),i("a-menu-divider"),i("a-menu-item",{key:"6",on:{click:function(t){return e.showSidebar("history")}}},[e._v("历史记录")]),i("a-menu-item",{key:"7",on:{click:e.rename}},[e._v("重命名")]),i("a-menu-item",{key:"8"},[e._v("打印")])],1)],1),i("a-dropdown",{attrs:{trigger:["click"]}},[i("span",{staticClass:"dropdown-title"},[e._v("编辑")]),i("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[i("a-menu-item",{key:"1"},[e._v("撤销")]),i("a-menu-item",{key:"2"},[e._v("重做")]),i("a-menu-divider"),i("a-menu-item",{key:"3"},[e._v("水平分割")]),i("a-menu-item",{key:"4"},[e._v("垂直分割")]),i("a-menu-divider"),i("a-menu-item",{key:"5",on:{click:e.addRow}},[e._v("插入区域")]),i("a-menu-item",{key:"6"},[e._v("删除区域")]),i("a-menu-divider"),i("a-menu-item",{key:"8",on:{click:e.clearMain}},[e._v("清空")])],1)],1),i("a-dropdown",{attrs:{trigger:["click"]}},[i("span",{staticClass:"dropdown-title"},[e._v("工具")]),i("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[i("a-menu-item",{key:"1",on:{click:function(t){return e.showSidebar("test")}}},[e._v("测试")]),i("a-menu-divider"),i("a-menu-item",{key:"2"},[e._v("浏览")])],1)],1)],1),i("div",{staticClass:"design-tools"},[e.historys.length>0?i("a-button-group",{staticClass:"group",staticStyle:{"margin-right":"20px"}},[i("a-button",{attrs:{disabled:!e.canHisRevoke},on:{click:e.hisRevoke}},[e._v("撤销")]),i("a-button",{attrs:{disabled:!e.canHisRedo},on:{click:e.hisRedo}},[e._v("重做")])],1):e._e(),"box"===e.toolType?i("a-button-group",{staticClass:"group"},[i("a-button",{on:{click:e.hh}},[e._v("水平分割")]),i("a-button",{on:{click:e.vv}},[e._v("垂直分割")]),i("a-button",{on:{click:e.lock}},[e._v("锁定800宽度")])],1):"line"===e.toolType?i("div",{staticStyle:{"line-height":"32px"}},[e._v(e._s(e.splitValue))]):e._e()],1),i("div",{ref:"main",staticClass:"design-main"},[i("t-box",{ref:"sbox",attrs:{boxs:e.boxs},on:{boxClick:e.boxClick,boxSelect:e.boxSelect,boxRightClick:e.boxRightClick,update:e.mainUpdate}}),i("a-menu",{directives:[{name:"show",rawName:"v-show",value:e.contentMenuVisible,expression:"contentMenuVisible"}],staticClass:"content-menu",style:e.contentMenu,attrs:{selectable:!1}},[i("a-menu-item",{key:"1",on:{click:function(t){return e.contentMenuClick("hh")}}},[e._v("水平分割")]),i("a-menu-item",{key:"2",on:{click:function(t){return e.contentMenuClick("vv")}}},[e._v("垂直分割")]),i("a-menu-divider"),i("a-menu-item",{key:"3",on:{click:function(t){return e.contentMenuClick("add")}}},[e._v("新增一行")]),i("a-menu-item",{key:"4",on:{click:function(t){return e.contentMenuClick("remove")}}},[e._v("删除")])],1)],1),i("a-drawer",{attrs:{title:e.sidebarTitle,placement:"right",width:320,closable:!1,visible:e.sidebarVisible},on:{close:e.sidebarClose}},["history"===e.sidebarType?void 0:"widget"===e.sidebarType?[i("div",{staticClass:"widget",on:{click:function(t){return e.addWidget("Aa")}}},[e._v("AA")]),i("div",{staticClass:"widget",on:{click:function(t){return e.addWidget("Bb")}}},[e._v("BB")])]:"test"===e.sidebarType?[i("pre",[e._v(e._s(e.boxs))])]:e._e()],2)],1)},s=[],o=(i("b2a3"),i("7b81"),i("9a33"),i("8e8e")),a=i.n(o),r=i("6042"),l=i.n(r),h=i("41b2"),u=i.n(h),c=i("4d91"),d=i("b488"),f=i("daa3"),p=i("6a21"),m={functional:!0,render:function(e,t){var i,n,s=t.props,o=s.included,a=s.vertical,r=s.offset,h=s.length,c=s.reverse,d=t.data,f=d.style,p=d["class"],m=a?(i={},l()(i,c?"top":"bottom",r+"%"),l()(i,c?"bottom":"top","auto"),l()(i,"height",h+"%"),i):(n={},l()(n,c?"right":"left",r+"%"),l()(n,c?"left":"right","auto"),l()(n,"width",h+"%"),n),v=u()({},f,m);return o?e("div",{class:p,style:v}):null}},v=m,b=i("4d26"),y=i.n(b),x=i("c8c6"),g=function(e,t,i,n,s,o){Object(p["a"])(!i||n>0,"Slider","`Slider[step]` should be a positive number in order to make Slider[dots] work.");var a=Object.keys(t).map(parseFloat).sort((function(e,t){return e-t}));if(i&&n)for(var r=s;r<=o;r+=n)-1===a.indexOf(r)&&a.push(r);return a},w={functional:!0,render:function(e,t){var i=t.props,n=i.prefixCls,s=i.vertical,o=i.reverse,a=i.marks,r=i.dots,h=i.step,c=i.included,d=i.lowerBound,f=i.upperBound,p=i.max,m=i.min,v=i.dotStyle,b=i.activeDotStyle,x=p-m,w=g(s,a,r,h,m,p).map((function(t){var i,a=Math.abs(t-m)/x*100+"%",r=!c&&t===f||c&&t<=f&&t>=d,h=s?u()({},v,l()({},o?"top":"bottom",a)):u()({},v,l()({},o?"right":"left",a));r&&(h=u()({},h,b));var p=y()((i={},l()(i,n+"-dot",!0),l()(i,n+"-dot-active",r),l()(i,n+"-dot-reverse",o),i));return e("span",{class:p,style:h,key:t})}));return e("div",{class:n+"-step"},[w])}},k=w,C=i("1098"),S=i.n(C),T={functional:!0,render:function(e,t){var i=t.props,n=i.className,s=i.vertical,o=i.reverse,a=i.marks,r=i.included,h=i.upperBound,c=i.lowerBound,d=i.max,p=i.min,m=t.listeners.clickLabel,v=Object.keys(a),b=d-p,x=v.map(parseFloat).sort((function(e,t){return e-t})).map((function(t){var i,d="function"===typeof a[t]?a[t](e):a[t],v="object"===("undefined"===typeof d?"undefined":S()(d))&&!Object(f["u"])(d),x=v?d.label:d;if(!x&&0!==x)return null;var g=!r&&t===h||r&&t<=h&&t>=c,w=y()((i={},l()(i,n+"-text",!0),l()(i,n+"-text-active",g),i)),k=l()({marginBottom:"-50%"},o?"top":"bottom",(t-p)/b*100+"%"),C=l()({transform:"translateX(-50%)",msTransform:"translateX(-50%)"},o?"right":"left",o?(t-p/4)/b*100+"%":(t-p)/b*100+"%"),T=s?k:C,O=v?u()({},T,d.style):T;return e("span",{class:w,style:O,key:t,on:{mousedown:function(e){return m(e,t)},touchstart:function(e){return m(e,t)}}},[x])}));return e("div",{class:n},[x])}},O=T,M={name:"Handle",mixins:[d["a"]],props:{prefixCls:c["a"].string,vertical:c["a"].bool,offset:c["a"].number,disabled:c["a"].bool,min:c["a"].number,max:c["a"].number,value:c["a"].number,tabIndex:c["a"].number,className:c["a"].string,reverse:c["a"].bool},data:function(){return{clickFocused:!1}},mounted:function(){this.onMouseUpListener=Object(x["a"])(document,"mouseup",this.handleMouseUp)},beforeDestroy:function(){this.onMouseUpListener&&this.onMouseUpListener.remove()},methods:{setClickFocus:function(e){this.setState({clickFocused:e})},handleMouseUp:function(){document.activeElement===this.$refs.handle&&this.setClickFocus(!0)},handleBlur:function(e){this.setClickFocus(!1),this.__emit("blur",e)},handleKeyDown:function(){this.setClickFocus(!1)},clickFocus:function(){this.setClickFocus(!0),this.focus()},focus:function(){this.$refs.handle.focus()},blur:function(){this.$refs.handle.blur()},handleMousedown:function(e){this.focus(),this.__emit("mousedown",e)}},render:function(){var e,t,i=arguments[0],n=Object(f["l"])(this),s=n.prefixCls,o=n.vertical,a=n.reverse,r=n.offset,h=n.disabled,c=n.min,d=n.max,p=n.value,m=n.tabIndex,v=y()(this.$props.className,l()({},s+"-handle-click-focused",this.clickFocused)),b=o?(e={},l()(e,a?"top":"bottom",r+"%"),l()(e,a?"bottom":"top","auto"),l()(e,"transform","translateY(+50%)"),e):(t={},l()(t,a?"right":"left",r+"%"),l()(t,a?"left":"right","auto"),l()(t,"transform","translateX("+(a?"+":"-")+"50%)"),t),x={"aria-valuemin":c,"aria-valuemax":d,"aria-valuenow":p,"aria-disabled":!!h},g=m||0;(h||null===m)&&(g=null);var w={attrs:u()({role:"slider",tabIndex:g},x),class:v,on:u()({},Object(f["k"])(this),{blur:this.handleBlur,keydown:this.handleKeyDown,mousedown:this.handleMousedown}),ref:"handle",style:b};return i("div",w)}},B=i("9b57"),$=i.n(B),E=i("18a7");function D(e,t){try{return Object.keys(t).some((function(i){return e.target===t[i].$el||e.target===t[i]}))}catch(i){return!1}}function V(e,t){var i=t.min,n=t.max;return e<i||e>n}function j(e){return e.touches.length>1||"touchend"===e.type.toLowerCase()&&e.touches.length>0}function H(e,t){var i=t.marks,n=t.step,s=t.min,o=t.max,a=Object.keys(i).map(parseFloat);if(null!==n){var r=Math.floor((o-s)/n),l=Math.min((e-s)/n,r),h=Math.round(l)*n+s;a.push(h)}var u=a.map((function(t){return Math.abs(e-t)}));return a[u.indexOf(Math.min.apply(Math,$()(u)))]}function R(e){var t=e.toString(),i=0;return t.indexOf(".")>=0&&(i=t.length-t.indexOf(".")-1),i}function _(e,t){var i=1;return window.visualViewport&&(i=+(window.visualViewport.width/document.body.getBoundingClientRect().width).toFixed(2)),(e?t.clientY:t.pageX)/i}function N(e,t){var i=1;return window.visualViewport&&(i=+(window.visualViewport.width/document.body.getBoundingClientRect().width).toFixed(2)),(e?t.touches[0].clientY:t.touches[0].pageX)/i}function P(e,t){var i=t.getBoundingClientRect();return e?i.top+.5*i.height:window.pageXOffset+i.left+.5*i.width}function I(e,t){var i=t.max,n=t.min;return e<=n?n:e>=i?i:e}function L(e,t){var i=t.step,n=isFinite(H(e,t))?H(e,t):0;return null===i?n:parseFloat(n.toFixed(R(i)))}function F(e){e.stopPropagation(),e.preventDefault()}function W(e,t,i){var n={increase:function(e,t){return e+t},decrease:function(e,t){return e-t}},s=n[e](Object.keys(i.marks).indexOf(JSON.stringify(t)),1),o=Object.keys(i.marks)[s];return i.step?n[e](t,i.step):Object.keys(i.marks).length&&i.marks[o]?i.marks[o]:t}function A(e,t,i){var n="increase",s="decrease",o=n;switch(e.keyCode){case E["a"].UP:o=t&&i?s:n;break;case E["a"].RIGHT:o=!t&&i?s:n;break;case E["a"].DOWN:o=t&&i?n:s;break;case E["a"].LEFT:o=!t&&i?n:s;break;case E["a"].END:return function(e,t){return t.max};case E["a"].HOME:return function(e,t){return t.min};case E["a"].PAGE_UP:return function(e,t){return e+2*t.step};case E["a"].PAGE_DOWN:return function(e,t){return e-2*t.step};default:return}return function(e,t){return W(o,e,t)}}function U(){}function X(e){var t={min:c["a"].number,max:c["a"].number,step:c["a"].number,marks:c["a"].object,included:c["a"].bool,prefixCls:c["a"].string,disabled:c["a"].bool,handle:c["a"].func,dots:c["a"].bool,vertical:c["a"].bool,reverse:c["a"].bool,minimumTrackStyle:c["a"].object,maximumTrackStyle:c["a"].object,handleStyle:c["a"].oneOfType([c["a"].object,c["a"].arrayOf(c["a"].object)]),trackStyle:c["a"].oneOfType([c["a"].object,c["a"].arrayOf(c["a"].object)]),railStyle:c["a"].object,dotStyle:c["a"].object,activeDotStyle:c["a"].object,autoFocus:c["a"].bool};return{name:"createSlider",mixins:[e],model:{prop:"value",event:"change"},props:Object(f["t"])(t,{prefixCls:"rc-slider",min:0,max:100,step:1,marks:{},included:!0,disabled:!1,dots:!1,vertical:!1,reverse:!1,trackStyle:[{}],handleStyle:[{}],railStyle:{},dotStyle:{},activeDotStyle:{}}),data:function(){var e=this.step,t=this.max,i=this.min,n=!isFinite(t-i)||(t-i)%e===0;return Object(p["a"])(!e||Math.floor(e)!==e||n,"Slider","Slider[max] - Slider[min] (%s) should be a multiple of Slider[step] (%s)",t-i,e),this.handlesRefs={},{}},mounted:function(){var e=this;this.$nextTick((function(){e.document=e.$refs.sliderRef&&e.$refs.sliderRef.ownerDocument;var t=e.autoFocus,i=e.disabled;t&&!i&&e.focus()}))},beforeDestroy:function(){var e=this;this.$nextTick((function(){e.removeDocumentEvents()}))},methods:{defaultHandle:function(e){var t=e.index,i=e.directives,n=e.className,s=e.style,o=e.on,r=a()(e,["index","directives","className","style","on"]),l=this.$createElement;if(delete r.dragging,null===r.value)return null;var h={props:u()({},r),class:n,style:s,key:t,directives:i,on:o};return l(M,h)},onMouseDown:function(e){if(0===e.button){var t=this.vertical,i=_(t,e);if(D(e,this.handlesRefs)){var n=P(t,e.target);this.dragOffset=i-n,i=n}else this.dragOffset=0;this.removeDocumentEvents(),this.onStart(i),this.addDocumentMouseEvents(),F(e)}},onTouchStart:function(e){if(!j(e)){var t=this.vertical,i=N(t,e);if(D(e,this.handlesRefs)){var n=P(t,e.target);this.dragOffset=i-n,i=n}else this.dragOffset=0;this.onStart(i),this.addDocumentTouchEvents(),F(e)}},onFocus:function(e){var t=this.vertical;if(D(e,this.handlesRefs)){var i=P(t,e.target);this.dragOffset=0,this.onStart(i),F(e),this.$emit("focus",e)}},onBlur:function(e){this.onEnd(),this.$emit("blur",e)},onMouseUp:function(){this.handlesRefs[this.prevMovedHandleIndex]&&this.handlesRefs[this.prevMovedHandleIndex].clickFocus()},onMouseMove:function(e){if(this.$refs.sliderRef){var t=_(this.vertical,e);this.onMove(e,t-this.dragOffset)}else this.onEnd()},onTouchMove:function(e){if(!j(e)&&this.$refs.sliderRef){var t=N(this.vertical,e);this.onMove(e,t-this.dragOffset)}else this.onEnd()},onKeyDown:function(e){this.$refs.sliderRef&&D(e,this.handlesRefs)&&this.onKeyboard(e)},onClickMarkLabel:function(e,t){var i=this;e.stopPropagation(),this.onChange({sValue:t}),this.setState({sValue:t},(function(){return i.onEnd(!0)}))},getSliderStart:function(){var e=this.$refs.sliderRef,t=this.vertical,i=this.reverse,n=e.getBoundingClientRect();return t?i?n.bottom:n.top:window.pageXOffset+(i?n.right:n.left)},getSliderLength:function(){var e=this.$refs.sliderRef;if(!e)return 0;var t=e.getBoundingClientRect();return this.vertical?t.height:t.width},addDocumentTouchEvents:function(){this.onTouchMoveListener=Object(x["a"])(this.document,"touchmove",this.onTouchMove),this.onTouchUpListener=Object(x["a"])(this.document,"touchend",this.onEnd)},addDocumentMouseEvents:function(){this.onMouseMoveListener=Object(x["a"])(this.document,"mousemove",this.onMouseMove),this.onMouseUpListener=Object(x["a"])(this.document,"mouseup",this.onEnd)},removeDocumentEvents:function(){this.onTouchMoveListener&&this.onTouchMoveListener.remove(),this.onTouchUpListener&&this.onTouchUpListener.remove(),this.onMouseMoveListener&&this.onMouseMoveListener.remove(),this.onMouseUpListener&&this.onMouseUpListener.remove()},focus:function(){this.disabled||this.handlesRefs[0].focus()},blur:function(){var e=this;this.disabled||Object.keys(this.handlesRefs).forEach((function(t){e.handlesRefs[t]&&e.handlesRefs[t].blur&&e.handlesRefs[t].blur()}))},calcValue:function(e){var t=this.vertical,i=this.min,n=this.max,s=Math.abs(Math.max(e,0)/this.getSliderLength()),o=t?(1-s)*(n-i)+i:s*(n-i)+i;return o},calcValueByPos:function(e){var t=this.reverse?-1:1,i=t*(e-this.getSliderStart()),n=this.trimAlignValue(this.calcValue(i));return n},calcOffset:function(e){var t=this.min,i=this.max,n=(e-t)/(i-t);return 100*n},saveHandle:function(e,t){this.handlesRefs[e]=t}},render:function(e){var t,i=this.prefixCls,n=this.marks,s=this.dots,o=this.step,a=this.included,r=this.disabled,h=this.vertical,c=this.reverse,d=this.min,f=this.max,p=this.maximumTrackStyle,m=this.railStyle,v=this.dotStyle,b=this.activeDotStyle,x=this.renderSlider(e),g=x.tracks,w=x.handles,C=y()(i,(t={},l()(t,i+"-with-marks",Object.keys(n).length),l()(t,i+"-disabled",r),l()(t,i+"-vertical",h),t)),S={props:{vertical:h,marks:n,included:a,lowerBound:this.getLowerBound(),upperBound:this.getUpperBound(),max:f,min:d,reverse:c,className:i+"-mark"},on:{clickLabel:r?U:this.onClickMarkLabel}};return e("div",{ref:"sliderRef",attrs:{tabIndex:"-1"},class:C,on:{touchstart:r?U:this.onTouchStart,mousedown:r?U:this.onMouseDown,mouseup:r?U:this.onMouseUp,keydown:r?U:this.onKeyDown,focus:r?U:this.onFocus,blur:r?U:this.onBlur}},[e("div",{class:i+"-rail",style:u()({},p,m)}),g,e(k,{attrs:{prefixCls:i,vertical:h,reverse:c,marks:n,dots:s,step:o,included:a,lowerBound:this.getLowerBound(),upperBound:this.getUpperBound(),max:f,min:d,dotStyle:v,activeDotStyle:b}}),w,e(O,S),this.$slots["default"]])}}}var z={name:"Slider",mixins:[d["a"]],props:{defaultValue:c["a"].number,value:c["a"].number,disabled:c["a"].bool,autoFocus:c["a"].bool,tabIndex:c["a"].number,reverse:c["a"].bool,min:c["a"].number,max:c["a"].number},data:function(){var e=void 0!==this.defaultValue?this.defaultValue:this.min,t=void 0!==this.value?this.value:e;return Object(p["a"])(!Object(f["s"])(this,"minimumTrackStyle"),"Slider","minimumTrackStyle will be deprecate, please use trackStyle instead."),Object(p["a"])(!Object(f["s"])(this,"maximumTrackStyle"),"Slider","maximumTrackStyle will be deprecate, please use railStyle instead."),{sValue:this.trimAlignValue(t),dragging:!1}},watch:{value:{handler:function(e){this.setChangeValue(e)},deep:!0},min:function(){var e=this.sValue;this.setChangeValue(e)},max:function(){var e=this.sValue;this.setChangeValue(e)}},methods:{setChangeValue:function(e){var t=void 0!==e?e:this.sValue,i=this.trimAlignValue(t,this.$props);i!==this.sValue&&(this.setState({sValue:i}),V(t,this.$props)&&this.$emit("change",i))},onChange:function(e){var t=!Object(f["s"])(this,"value"),i=e.sValue>this.max?u()({},e,{sValue:this.max}):e;t&&this.setState(i);var n=i.sValue;this.$emit("change",n)},onStart:function(e){this.setState({dragging:!0});var t=this.sValue;this.$emit("beforeChange",t);var i=this.calcValueByPos(e);this.startValue=i,this.startPosition=e,i!==t&&(this.prevMovedHandleIndex=0,this.onChange({sValue:i}))},onEnd:function(e){var t=this.dragging;this.removeDocumentEvents(),(t||e)&&this.$emit("afterChange",this.sValue),this.setState({dragging:!1})},onMove:function(e,t){F(e);var i=this.sValue,n=this.calcValueByPos(t);n!==i&&this.onChange({sValue:n})},onKeyboard:function(e){var t=this.$props,i=t.reverse,n=t.vertical,s=A(e,n,i);if(s){F(e);var o=this.sValue,a=s(o,this.$props),r=this.trimAlignValue(a);if(r===o)return;this.onChange({sValue:r}),this.$emit("afterChange",r),this.onEnd()}},getLowerBound:function(){return this.min},getUpperBound:function(){return this.sValue},trimAlignValue:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null===e)return null;var i=u()({},this.$props,t),n=I(e,i);return L(n,i)},getTrack:function(e){var t=e.prefixCls,i=e.reverse,n=e.vertical,s=e.included,o=e.offset,a=e.minimumTrackStyle,r=e._trackStyle,l=this.$createElement;return l(v,{class:t+"-track",attrs:{vertical:n,included:s,offset:0,reverse:i,length:o},style:u()({},a,r)})},renderSlider:function(){var e=this,t=this.prefixCls,i=this.vertical,n=this.included,s=this.disabled,o=this.minimumTrackStyle,a=this.trackStyle,r=this.handleStyle,l=this.tabIndex,h=this.min,u=this.max,c=this.reverse,d=this.handle,f=this.defaultHandle,p=d||f,m=this.sValue,v=this.dragging,b=this.calcOffset(m),y=p({className:t+"-handle",prefixCls:t,vertical:i,offset:b,value:m,dragging:v,disabled:s,min:h,max:u,reverse:c,index:0,tabIndex:l,style:r[0]||r,directives:[{name:"ant-ref",value:function(t){return e.saveHandle(0,t)}}],on:{focus:this.onFocus,blur:this.onBlur}}),x=a[0]||a;return{tracks:this.getTrack({prefixCls:t,reverse:c,vertical:i,included:n,offset:b,minimumTrackStyle:o,_trackStyle:x}),handles:y}}}},Y=X(z),J=function(e){var t=e.value,i=e.handle,n=e.bounds,s=e.props,o=s.allowCross,a=s.pushable,r=Number(a),l=I(t,s),h=l;return o||null==i||void 0===n||(i>0&&l<=n[i-1]+r&&(h=n[i-1]+r),i<n.length-1&&l>=n[i+1]-r&&(h=n[i+1]-r)),L(h,s)},K={defaultValue:c["a"].arrayOf(c["a"].number),value:c["a"].arrayOf(c["a"].number),count:c["a"].number,pushable:c["a"].oneOfType([c["a"].bool,c["a"].number]),allowCross:c["a"].bool,disabled:c["a"].bool,reverse:c["a"].bool,tabIndex:c["a"].arrayOf(c["a"].number),prefixCls:c["a"].string,min:c["a"].number,max:c["a"].number,autoFocus:c["a"].bool},G={name:"Range",displayName:"Range",mixins:[d["a"]],props:Object(f["t"])(K,{count:1,allowCross:!0,pushable:!1,tabIndex:[]}),data:function(){var e=this,t=this.count,i=this.min,n=this.max,s=Array.apply(void 0,$()(Array(t+1))).map((function(){return i})),o=Object(f["s"])(this,"defaultValue")?this.defaultValue:s,a=this.value;void 0===a&&(a=o);var r=a.map((function(t,i){return J({value:t,handle:i,props:e.$props})})),l=r[0]===n?0:r.length-1;return{sHandle:null,recent:l,bounds:r}},watch:{value:{handler:function(e){var t=this.bounds;this.setChangeValue(e||t)},deep:!0},min:function(){var e=this.value;this.setChangeValue(e||this.bounds)},max:function(){var e=this.value;this.setChangeValue(e||this.bounds)}},methods:{setChangeValue:function(e){var t=this,i=this.bounds,n=e.map((function(e,n){return J({value:e,handle:n,bounds:i,props:t.$props})}));if((n.length!==i.length||!n.every((function(e,t){return e===i[t]})))&&(this.setState({bounds:n}),e.some((function(e){return V(e,t.$props)})))){var s=e.map((function(e){return I(e,t.$props)}));this.$emit("change",s)}},onChange:function(e){var t=!Object(f["s"])(this,"value");if(t)this.setState(e);else{var i={};["sHandle","recent"].forEach((function(t){void 0!==e[t]&&(i[t]=e[t])})),Object.keys(i).length&&this.setState(i)}var n=u()({},this.$data,e),s=n.bounds;this.$emit("change",s)},onStart:function(e){var t=this.bounds;this.$emit("beforeChange",t);var i=this.calcValueByPos(e);this.startValue=i,this.startPosition=e;var n=this.getClosestBound(i);this.prevMovedHandleIndex=this.getBoundNeedMoving(i,n),this.setState({sHandle:this.prevMovedHandleIndex,recent:this.prevMovedHandleIndex});var s=t[this.prevMovedHandleIndex];if(i!==s){var o=[].concat($()(t));o[this.prevMovedHandleIndex]=i,this.onChange({bounds:o})}},onEnd:function(e){var t=this.sHandle;this.removeDocumentEvents(),(null!==t||e)&&this.$emit("afterChange",this.bounds),this.setState({sHandle:null})},onMove:function(e,t){F(e);var i=this.bounds,n=this.sHandle,s=this.calcValueByPos(t),o=i[n];s!==o&&this.moveTo(s)},onKeyboard:function(e){var t=this.$props,i=t.reverse,n=t.vertical,s=A(e,n,i);if(s){F(e);var o=this.bounds,a=this.sHandle,r=o[null===a?this.recent:a],l=s(r,this.$props),h=J({value:l,handle:a,bounds:o,props:this.$props});if(h===r)return;var u=!0;this.moveTo(h,u)}},getClosestBound:function(e){for(var t=this.bounds,i=0,n=1;n<t.length-1;++n)e>t[n]&&(i=n);return Math.abs(t[i+1]-e)<Math.abs(t[i]-e)&&(i+=1),i},getBoundNeedMoving:function(e,t){var i=this.bounds,n=this.recent,s=t,o=i[t+1]===i[t];return o&&i[n]===i[t]&&(s=n),o&&e!==i[t+1]&&(s=e<i[t+1]?t:t+1),s},getLowerBound:function(){return this.bounds[0]},getUpperBound:function(){var e=this.bounds;return e[e.length-1]},getPoints:function(){var e=this.marks,t=this.step,i=this.min,n=this.max,s=this._getPointsCache;if(!s||s.marks!==e||s.step!==t){var o=u()({},e);if(null!==t)for(var a=i;a<=n;a+=t)o[a]=a;var r=Object.keys(o).map(parseFloat);r.sort((function(e,t){return e-t})),this._getPointsCache={marks:e,step:t,points:r}}return this._getPointsCache.points},moveTo:function(e,t){var i=this,n=[].concat($()(this.bounds)),s=this.sHandle,o=this.recent,a=null===s?o:s;n[a]=e;var r=a;!1!==this.$props.pushable?this.pushSurroundingHandles(n,r):this.$props.allowCross&&(n.sort((function(e,t){return e-t})),r=n.indexOf(e)),this.onChange({recent:r,sHandle:r,bounds:n}),t&&(this.$emit("afterChange",n),this.setState({},(function(){i.handlesRefs[r].focus()})),this.onEnd())},pushSurroundingHandles:function(e,t){var i=e[t],n=this.pushable;n=Number(n);var s=0;if(e[t+1]-i<n&&(s=1),i-e[t-1]<n&&(s=-1),0!==s){var o=t+s,a=s*(e[o]-i);this.pushHandle(e,o,s,n-a)||(e[t]=e[o]-s*n)}},pushHandle:function(e,t,i,n){var s=e[t],o=e[t];while(i*(o-s)<n){if(!this.pushHandleOnePoint(e,t,i))return e[t]=s,!1;o=e[t]}return!0},pushHandleOnePoint:function(e,t,i){var n=this.getPoints(),s=n.indexOf(e[t]),o=s+i;if(o>=n.length||o<0)return!1;var a=t+i,r=n[o],l=this.pushable,h=i*(e[a]-r);return!!this.pushHandle(e,a,i,l-h)&&(e[t]=r,!0)},trimAlignValue:function(e){var t=this.sHandle,i=this.bounds;return J({value:e,handle:t,bounds:i,props:this.$props})},ensureValueNotConflict:function(e,t,i){var n=i.allowCross,s=i.pushable,o=this.$data||{},a=o.bounds;if(e=void 0===e?o.sHandle:e,s=Number(s),!n&&null!=e&&void 0!==a){if(e>0&&t<=a[e-1]+s)return a[e-1]+s;if(e<a.length-1&&t>=a[e+1]-s)return a[e+1]-s}return t},getTrack:function(e){var t=e.bounds,i=e.prefixCls,n=e.reverse,s=e.vertical,o=e.included,a=e.offsets,r=e.trackStyle,h=this.$createElement;return t.slice(0,-1).map((function(e,t){var u,c=t+1,d=y()((u={},l()(u,i+"-track",!0),l()(u,i+"-track-"+c,!0),u));return h(v,{class:d,attrs:{vertical:s,reverse:n,included:o,offset:a[c-1],length:a[c]-a[c-1]},style:r[t],key:c})}))},renderSlider:function(){var e=this,t=this.sHandle,i=this.bounds,n=this.prefixCls,s=this.vertical,o=this.included,a=this.disabled,r=this.min,h=this.max,u=this.reverse,c=this.handle,d=this.defaultHandle,f=this.trackStyle,p=this.handleStyle,m=this.tabIndex,v=c||d,b=i.map((function(t){return e.calcOffset(t)})),x=n+"-handle",g=i.map((function(i,o){var c,d=m[o]||0;return(a||null===m[o])&&(d=null),v({className:y()((c={},l()(c,x,!0),l()(c,x+"-"+(o+1),!0),c)),prefixCls:n,vertical:s,offset:b[o],value:i,dragging:t===o,index:o,tabIndex:d,min:r,max:h,reverse:u,disabled:a,style:p[o],directives:[{name:"ant-ref",value:function(t){return e.saveHandle(o,t)}}],on:{focus:e.onFocus,blur:e.onBlur}})}));return{tracks:this.getTrack({bounds:i,prefixCls:n,reverse:u,vertical:s,included:o,offsets:b,trackStyle:f}),handles:g}}}},q=X(G),Z=i("f933"),Q=i("db14"),ee=i("4df5"),te=i("f54f"),ie=Object(te["a"])(),ne=function(){return{prefixCls:c["a"].string,tooltipPrefixCls:c["a"].string,range:c["a"].bool,reverse:c["a"].bool,min:c["a"].number,max:c["a"].number,step:c["a"].oneOfType([c["a"].number,c["a"].any]),marks:c["a"].object,dots:c["a"].bool,value:c["a"].oneOfType([c["a"].number,c["a"].arrayOf(c["a"].number)]),defaultValue:c["a"].oneOfType([c["a"].number,c["a"].arrayOf(c["a"].number)]),included:c["a"].bool,disabled:c["a"].bool,vertical:c["a"].bool,tipFormatter:c["a"].oneOfType([c["a"].func,c["a"].object]),tooltipVisible:c["a"].bool,tooltipPlacement:ie.placement,getTooltipPopupContainer:c["a"].func}},se={name:"ASlider",model:{prop:"value",event:"change"},mixins:[d["a"]],inject:{configProvider:{default:function(){return ee["a"]}}},props:u()({},ne(),{tipFormatter:c["a"].oneOfType([c["a"].func,c["a"].object]).def((function(e){return e.toString()}))}),data:function(){return{visibles:{}}},methods:{toggleTooltipVisible:function(e,t){this.setState((function(i){var n=i.visibles;return{visibles:u()({},n,l()({},e,t))}}))},handleWithTooltip:function(e,t,i){var n=this,s=i.value,o=i.dragging,r=i.index,l=i.directives,h=i.on,c=a()(i,["value","dragging","index","directives","on"]),d=this.$createElement,f=this.$props,p=f.tipFormatter,m=f.tooltipVisible,v=f.tooltipPlacement,b=f.getTooltipPopupContainer,y=this.visibles,x=!!p&&(y[r]||o),g=m||void 0===m&&x,w={props:{prefixCls:e,title:p?p(s):"",visible:g,placement:v||"top",transitionName:"zoom-down",overlayClassName:t+"-tooltip",getPopupContainer:b||function(){return document.body}},key:r},k={props:u()({value:s},c),directives:l,on:u()({},h,{mouseenter:function(){return n.toggleTooltipVisible(r,!0)},mouseleave:function(){return n.toggleTooltipVisible(r,!1)}})};return d(Z["a"],w,[d(M,k)])},focus:function(){this.$refs.sliderRef.focus()},blur:function(){this.$refs.sliderRef.blur()}},render:function(){var e=this,t=arguments[0],i=Object(f["l"])(this),n=i.range,s=i.prefixCls,o=i.tooltipPrefixCls,r=a()(i,["range","prefixCls","tooltipPrefixCls"]),l=this.configProvider.getPrefixCls,h=l("slider",s),c=l("tooltip",o),d=Object(f["k"])(this);if(n){var p={props:u()({},r,{prefixCls:h,tooltipPrefixCls:c,handle:function(t){return e.handleWithTooltip(c,h,t)}}),ref:"sliderRef",on:d};return t(q,p)}var m={props:u()({},r,{prefixCls:h,tooltipPrefixCls:c,handle:function(t){return e.handleWithTooltip(c,h,t)}}),ref:"sliderRef",on:d};return t(Y,m)},install:function(e){e.use(Q["a"]),e.component(se.name,se)}},oe=se,ae=(i("fbd8"),i("55f1")),re=(i("9d5c"),i("a600")),le=(i("5cdc"),i("0464")),he=i("92fa"),ue=i.n(he),ce=i("8bbf"),de=i.n(ce),fe=i("46cf"),pe=i.n(fe),me=i("7b05"),ve=i("6f7a"),be={width:c["a"].any,height:c["a"].any,defaultOpen:c["a"].bool,firstEnter:c["a"].bool,open:c["a"].bool,prefixCls:c["a"].string,placement:c["a"].string,level:c["a"].oneOfType([c["a"].string,c["a"].array]),levelMove:c["a"].oneOfType([c["a"].number,c["a"].func,c["a"].array]),ease:c["a"].string,duration:c["a"].string,handler:c["a"].any,showMask:c["a"].bool,maskStyle:c["a"].object,className:c["a"].string,wrapStyle:c["a"].object,maskClosable:c["a"].bool,afterVisibleChange:c["a"].func,keyboard:c["a"].bool},ye=u()({},be,{wrapperClassName:c["a"].string,forceRender:c["a"].bool,getContainer:c["a"].oneOfType([c["a"].string,c["a"].func,c["a"].object,c["a"].bool])});u()({},be,{getContainer:c["a"].func,getOpenCount:c["a"].func,switchScrollingEffect:c["a"].func});function xe(e){return Array.isArray(e)?e:[e]}var ge={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend"},we=Object.keys(ge).filter((function(e){if("undefined"===typeof document)return!1;var t=document.getElementsByTagName("html")[0];return e in(t?t.style:{})}))[0],ke=ge[we];function Ce(e,t,i,n){e.addEventListener?e.addEventListener(t,i,n):e.attachEvent&&e.attachEvent("on"+t,i)}function Se(e,t,i,n){e.removeEventListener?e.removeEventListener(t,i,n):e.attachEvent&&e.detachEvent("on"+t,i)}function Te(e,t){var i=void 0;return i="function"===typeof e?e(t):e,Array.isArray(i)?2===i.length?i:[i[0],i[1]]:[i]}var Oe=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},Me=("undefined"!==typeof window&&window.document&&window.document.createElement,i("8e60"));function Be(){}var $e={},Ee=!("undefined"!==typeof window&&window.document&&window.document.createElement);de.a.use(pe.a,{name:"ant-ref"});var De={mixins:[d["a"]],props:Object(f["t"])(ye,{prefixCls:"drawer",placement:"left",getContainer:"body",level:"all",duration:".3s",ease:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",firstEnter:!1,showMask:!0,handler:!0,maskStyle:{},wrapperClassName:"",className:""}),data:function(){this.levelDom=[],this.contentDom=null,this.maskDom=null,this.handlerdom=null,this.mousePos=null,this.sFirstEnter=this.firstEnter,this.timeout=null,this.children=null,this.drawerId=Number((Date.now()+Math.random()).toString().replace(".",Math.round(9*Math.random()))).toString(16);var e=void 0!==this.open?this.open:!!this.defaultOpen;return $e[this.drawerId]=e,this.orignalOpen=this.open,this.preProps=u()({},this.$props),{sOpen:e}},mounted:function(){var e=this;this.$nextTick((function(){if(!Ee){var t=!1;window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){return t=!0,null}})),e.passive=!!t&&{passive:!1}}var i=e.getOpen();(e.handler||i||e.sFirstEnter)&&(e.getDefault(e.$props),i&&(e.isOpenChange=!0),e.$forceUpdate())}))},watch:{open:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){void 0!==e&&e!==this.preProps.open&&(this.isOpenChange=!0,this.container||this.getDefault(this.$props),this.setState({sOpen:open})),this.preProps.open=e})),placement:function(e){e!==this.preProps.placement&&(this.contentDom=null),this.preProps.placement=e},level:function(e){this.preProps.level!==e&&this.getParentAndLevelDom(this.$props),this.preProps.level=e}},updated:function(){var e=this;this.$nextTick((function(){!e.sFirstEnter&&e.container&&(e.$forceUpdate(),e.sFirstEnter=!0)}))},beforeDestroy:function(){delete $e[this.drawerId],delete this.isOpenChange,this.container&&(this.sOpen&&this.setLevelDomTransform(!1,!0),document.body.style.overflow=""),this.sFirstEnter=!1,clearTimeout(this.timeout)},methods:{onKeyDown:function(e){e.keyCode===E["a"].ESC&&(e.stopPropagation(),this.$emit("close",e))},onMaskTouchEnd:function(e){this.$emit("close",e),this.onTouchEnd(e,!0)},onIconTouchEnd:function(e){this.$emit("handleClick",e),this.onTouchEnd(e)},onTouchEnd:function(e,t){if(void 0===this.open){var i=t||this.sOpen;this.isOpenChange=!0,this.setState({sOpen:!i})}},onWrapperTransitionEnd:function(e){if(e.target===this.contentWrapper&&e.propertyName.match(/transform$/)){var t=this.getOpen();this.dom.style.transition="",!t&&this.getCurrentDrawerSome()&&(document.body.style.overflowX="",this.maskDom&&(this.maskDom.style.left="",this.maskDom.style.width="")),this.afterVisibleChange&&this.afterVisibleChange(!!t)}},getDefault:function(e){this.getParentAndLevelDom(e),(e.getContainer||e.parent)&&(this.container=this.defaultGetContainer())},getCurrentDrawerSome:function(){return!Object.keys($e).some((function(e){return $e[e]}))},getSelfContainer:function(){return this.container},getParentAndLevelDom:function(e){var t=this;if(!Ee){var i=e.level,n=e.getContainer;if(this.levelDom=[],n){if("string"===typeof n){var s=document.querySelectorAll(n)[0];this.parent=s}"function"===typeof n&&(this.parent=n()),"object"===("undefined"===typeof n?"undefined":S()(n))&&n instanceof window.HTMLElement&&(this.parent=n)}if(!n&&this.container&&(this.parent=this.container.parentNode),"all"===i){var o=Array.prototype.slice.call(this.parent.children);o.forEach((function(e){"SCRIPT"!==e.nodeName&&"STYLE"!==e.nodeName&&"LINK"!==e.nodeName&&e!==t.container&&t.levelDom.push(e)}))}else i&&xe(i).forEach((function(e){document.querySelectorAll(e).forEach((function(e){t.levelDom.push(e)}))}))}},setLevelDomTransform:function(e,t,i,n){var s=this,o=this.$props,a=o.placement,r=o.levelMove,l=o.duration,h=o.ease,u=o.getContainer;if(!Ee&&(this.levelDom.forEach((function(o){if(s.isOpenChange||t){o.style.transition="transform "+l+" "+h,Ce(o,ke,s.trnasitionEnd);var u=e?n:0;if(r){var c=Te(r,{target:o,open:e});u=e?c[0]:c[1]||0}var d="number"===typeof u?u+"px":u,f="left"===a||"top"===a?d:"-"+d;o.style.transform=u?i+"("+f+")":"",o.style.msTransform=u?i+"("+f+")":""}})),"body"===u)){var c=["touchstart"],d=[document.body,this.maskDom,this.handlerdom,this.contentDom],p=document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth?Object(ve["a"])(1):0,m="width "+l+" "+h,v="transform "+l+" "+h;if(e&&"hidden"!==document.body.style.overflow){if(document.body.style.overflow="hidden",p){switch(document.body.style.position="relative",document.body.style.width="calc(100% - "+p+"px)",this.dom.style.transition="none",a){case"right":this.dom.style.transform="translateX(-"+p+"px)",this.dom.style.msTransform="translateX(-"+p+"px)";break;case"top":case"bottom":this.dom.style.width="calc(100% - "+p+"px)",this.dom.style.transform="translateZ(0)";break;default:break}clearTimeout(this.timeout),this.timeout=setTimeout((function(){s.dom.style.transition=v+","+m,s.dom.style.width="",s.dom.style.transform="",s.dom.style.msTransform=""}))}d.forEach((function(e,t){e&&Ce(e,c[t]||"touchmove",t?s.removeMoveHandler:s.removeStartHandler,s.passive)}))}else if(this.getCurrentDrawerSome()){if(document.body.style.overflow="",(this.isOpenChange||t)&&p){document.body.style.position="",document.body.style.width="",we&&(document.body.style.overflowX="hidden"),this.dom.style.transition="none";var b=void 0;switch(a){case"right":this.dom.style.transform="translateX("+p+"px)",this.dom.style.msTransform="translateX("+p+"px)",this.dom.style.width="100%",m="width 0s "+h+" "+l,this.maskDom&&(this.maskDom.style.left="-"+p+"px",this.maskDom.style.width="calc(100% + "+p+"px)");break;case"top":case"bottom":this.dom.style.width="calc(100% + "+p+"px)",this.dom.style.height="100%",this.dom.style.transform="translateZ(0)",b="height 0s "+h+" "+l;break;default:break}clearTimeout(this.timeout),this.timeout=setTimeout((function(){s.dom.style.transition=v+","+(b?b+",":"")+m,s.dom.style.transform="",s.dom.style.msTransform="",s.dom.style.width="",s.dom.style.height=""}))}d.forEach((function(e,t){e&&Se(e,c[t]||"touchmove",t?s.removeMoveHandler:s.removeStartHandler,s.passive)}))}}var y=Object(f["k"])(this),x=y.change;x&&this.isOpenChange&&this.sFirstEnter&&(x(e),this.isOpenChange=!1)},getChildToRender:function(e){var t,i=this,n=this.$createElement,s=this.$props,o=s.className,a=s.prefixCls,r=s.placement,h=s.handler,u=s.showMask,c=s.maskStyle,d=s.width,p=s.height,m=s.wrapStyle,v=s.keyboard,b=s.maskClosable,x=this.$slots["default"],g=y()(a,(t={},l()(t,a+"-"+r,!0),l()(t,a+"-open",e),l()(t,o,!!o),l()(t,"no-mask",!u),t)),w=this.isOpenChange,k="left"===r||"right"===r,C="translate"+(k?"X":"Y"),S="left"===r||"top"===r?"-100%":"100%",T=e?"":C+"("+S+")";if(void 0===w||w){var O=this.contentDom?this.contentDom.getBoundingClientRect()[k?"width":"height"]:0,M=(k?d:p)||O;this.setLevelDomTransform(e,!1,C,M)}var B=void 0;if(!1!==h){var $=n("div",{class:"drawer-handle"},[n("i",{class:"drawer-handle-icon"})]),E=this.handler,D=E&&E[0]||$,V=Object(f["i"])(D),j=V.click;B=Object(me["a"])(D,{on:{click:function(e){j&&j(),i.onIconTouchEnd(e)}},directives:[{name:"ant-ref",value:function(e){i.handlerdom=e}}]})}var H={class:g,directives:[{name:"ant-ref",value:function(e){i.dom=e}}],on:{transitionend:this.onWrapperTransitionEnd,keydown:e&&v?this.onKeyDown:Be},style:m},R=[{name:"ant-ref",value:function(e){i.maskDom=e}}],_=[{name:"ant-ref",value:function(e){i.contentWrapper=e}}],N=[{name:"ant-ref",value:function(e){i.contentDom=e}}];return n("div",ue()([H,{attrs:{tabIndex:-1}}]),[u&&n("div",ue()([{key:e,class:a+"-mask",on:{click:b?this.onMaskTouchEnd:Be},style:c},{directives:R}])),n("div",ue()([{class:a+"-content-wrapper",style:{transform:T,msTransform:T,width:Oe(d)?d+"px":d,height:Oe(p)?p+"px":p}},{directives:_}]),[n("div",ue()([{class:a+"-content"},{directives:N},{on:{touchstart:e?this.removeStartHandler:Be,touchmove:e?this.removeMoveHandler:Be}}]),[x]),B])])},getOpen:function(){return void 0!==this.open?this.open:this.sOpen},getTouchParentScroll:function(e,t,i,n){if(!t||t===document)return!1;if(t===e.parentNode)return!0;var s=Math.max(Math.abs(i),Math.abs(n))===Math.abs(n),o=Math.max(Math.abs(i),Math.abs(n))===Math.abs(i),a=t.scrollHeight-t.clientHeight,r=t.scrollWidth-t.clientWidth,l=t.scrollTop,h=t.scrollLeft;t.scrollTo&&t.scrollTo(t.scrollLeft+1,t.scrollTop+1);var u=t.scrollTop,c=t.scrollLeft;return t.scrollTo&&t.scrollTo(t.scrollLeft-1,t.scrollTop-1),!((!s||a&&u-l&&(!a||!(t.scrollTop>=a&&n<0||t.scrollTop<=0&&n>0)))&&(!o||r&&c-h&&(!r||!(t.scrollLeft>=r&&i<0||t.scrollLeft<=0&&i>0))))&&this.getTouchParentScroll(e,t.parentNode,i,n)},removeStartHandler:function(e){e.touches.length>1||(this.startPos={x:e.touches[0].clientX,y:e.touches[0].clientY})},removeMoveHandler:function(e){if(!(e.changedTouches.length>1)){var t=e.currentTarget,i=e.changedTouches[0].clientX-this.startPos.x,n=e.changedTouches[0].clientY-this.startPos.y;(t===this.maskDom||t===this.handlerdom||t===this.contentDom&&this.getTouchParentScroll(t,e.target,i,n))&&e.preventDefault()}},trnasitionEnd:function(e){Se(e.target,ke,this.trnasitionEnd),e.target.style.transition=""},defaultGetContainer:function(){if(Ee)return null;var e=document.createElement("div");return this.parent.appendChild(e),this.wrapperClassName&&(e.className=this.wrapperClassName),e}},render:function(){var e=this,t=arguments[0],i=this.$props,n=i.getContainer,s=i.wrapperClassName,o=i.handler,a=i.forceRender,r=this.getOpen(),l=null;$e[this.drawerId]=r?this.container:r;var h=this.getChildToRender(!!this.sFirstEnter&&r);if(!n){var u=[{name:"ant-ref",value:function(t){e.container=t}}];return t("div",ue()([{class:s},{directives:u}]),[h])}if(!this.container||!r&&!this.sFirstEnter)return null;var c=!!o||a;return(c||r||this.dom)&&(l=t(Me["a"],{attrs:{getContainer:this.getSelfContainer,children:h}})),l}},Ve=De,je=Ve,He=i("0c63"),Re={name:"ADrawer",props:{closable:c["a"].bool.def(!0),destroyOnClose:c["a"].bool,getContainer:c["a"].any,maskClosable:c["a"].bool.def(!0),mask:c["a"].bool.def(!0),maskStyle:c["a"].object,wrapStyle:c["a"].object,bodyStyle:c["a"].object,headerStyle:c["a"].object,drawerStyle:c["a"].object,title:c["a"].any,visible:c["a"].bool,width:c["a"].oneOfType([c["a"].string,c["a"].number]).def(256),height:c["a"].oneOfType([c["a"].string,c["a"].number]).def(256),zIndex:c["a"].number,prefixCls:c["a"].string,placement:c["a"].oneOf(["top","right","bottom","left"]).def("right"),level:c["a"].any.def(null),wrapClassName:c["a"].string,handle:c["a"].any,afterVisibleChange:c["a"].func,keyboard:c["a"].bool.def(!0)},mixins:[d["a"]],data:function(){return this.destroyClose=!1,this.preVisible=this.$props.visible,{_push:!1}},inject:{parentDrawer:{default:function(){return null}},configProvider:{default:function(){return ee["a"]}}},provide:function(){return{parentDrawer:this}},mounted:function(){var e=this.visible;e&&this.parentDrawer&&this.parentDrawer.push()},updated:function(){var e=this;this.$nextTick((function(){e.preVisible!==e.visible&&e.parentDrawer&&(e.visible?e.parentDrawer.push():e.parentDrawer.pull()),e.preVisible=e.visible}))},beforeDestroy:function(){this.parentDrawer&&this.parentDrawer.pull()},methods:{close:function(e){this.$emit("close",e)},push:function(){this.setState({_push:!0})},pull:function(){this.setState({_push:!1})},onDestroyTransitionEnd:function(){var e=this.getDestroyOnClose();e&&(this.visible||(this.destroyClose=!0,this.$forceUpdate()))},getDestroyOnClose:function(){return this.destroyOnClose&&!this.visible},getPushTransform:function(e){return"left"===e||"right"===e?"translateX("+("left"===e?180:-180)+"px)":"top"===e||"bottom"===e?"translateY("+("top"===e?180:-180)+"px)":void 0},getRcDrawerStyle:function(){var e=this.$props,t=e.zIndex,i=e.placement,n=e.wrapStyle,s=this.$data._push;return u()({zIndex:t,transform:s?this.getPushTransform(i):void 0},n)},renderHeader:function(e){var t=this.$createElement,i=this.$props,n=i.closable,s=i.headerStyle,o=Object(f["g"])(this,"title");if(!o&&!n)return null;var a=o?e+"-header":e+"-header-no-title";return t("div",{class:a,style:s},[o&&t("div",{class:e+"-title"},[o]),n?this.renderCloseIcon(e):null])},renderCloseIcon:function(e){var t=this.$createElement,i=this.closable;return i&&t("button",{key:"closer",on:{click:this.close},attrs:{"aria-label":"Close"},class:e+"-close"},[t(He["a"],{attrs:{type:"close"}})])},renderBody:function(e){var t=this.$createElement;if(this.destroyClose&&!this.visible)return null;this.destroyClose=!1;var i=this.$props,n=i.bodyStyle,s=i.drawerStyle,o={},a=this.getDestroyOnClose();return a&&(o.opacity=0,o.transition="opacity .3s"),t("div",{class:e+"-wrapper-body",style:u()({},o,s),on:{transitionend:this.onDestroyTransitionEnd}},[this.renderHeader(e),t("div",{key:"body",class:e+"-body",style:n},[this.$slots["default"]])])}},render:function(){var e,t=arguments[0],i=Object(f["l"])(this),n=i.prefixCls,s=i.width,o=i.height,r=i.visible,h=i.placement,c=i.wrapClassName,d=i.mask,p=a()(i,["prefixCls","width","height","visible","placement","wrapClassName","mask"]),m=d?"":"no-mask",v={};"left"===h||"right"===h?v.width="number"===typeof s?s+"px":s:v.height="number"===typeof o?o+"px":o;var b=Object(f["g"])(this,"handle")||!1,x=this.configProvider.getPrefixCls,g=x("drawer",n),w={props:u()({},Object(le["a"])(p,["closable","destroyOnClose","drawerStyle","headerStyle","bodyStyle","title","push","visible","getPopupContainer","rootPrefixCls","getPrefixCls","renderEmpty","csp","pageHeader","autoInsertSpaceInButton"]),{handler:b},v,{prefixCls:g,open:r,showMask:d,placement:h,className:y()((e={},l()(e,c,!!c),l()(e,m,!!m),e)),wrapStyle:this.getRcDrawerStyle()}),on:u()({},Object(f["k"])(this))};return t(je,w,[this.renderBody(g)])},install:function(e){e.use(Q["a"]),e.component(Re.name,Re)}},_e=Re,Ne=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tbox-view",style:{height:e.mainHeight},on:{mousemove:e.handleDrag,mouseup:e.handleDragEnd,mouseleave:e.handleLeave}},[i("div",{staticClass:"boxs"},[e._l(e.showBoxs,(function(t){return i("div",{key:t.id,class:["box",{active:e.cBox===t.id}],style:e.boxStyle(t),on:{click:function(i){return e.boxClick(t)},contextmenu:function(i){return i.preventDefault(),e.menuShow(t.id,i)}}},[e.cBox===t.id?i("a-button",{staticClass:"box-add",attrs:{type:"dashed",icon:"plus"},on:{click:e.boxSelect}},[e._v("添加 ")]):t.component?i(t.component.name,{tag:"component"}):e._e()],1)})),i("div",{staticClass:"box-line col",style:e.boxLineColStyle,on:{mousedown:function(t){return t.preventDefault(),e.lineDragStart("col")}}}),i("div",{staticClass:"box-line row",style:e.boxLineRowStyle,on:{mousedown:function(t){return t.preventDefault(),e.lineDragStart("row")}}})],2),i("resize-observer",{on:{notify:e.handleResize}})],1)},Pe=[],Ie=i("ec26"),Le={name:"TBox",data(){return{cBox:null,lineType:null}},props:{minW:{type:Number,default:100},minH:{type:Number,default:50},boxs:{type:Array,default(){return[]}}},computed:{boxMap(){const e={};return this.boxs.forEach(t=>{e[t.id]=t}),e},showBoxs(){return this.boxs.filter(e=>void 0===e.mode)},rootBox(){return this.boxs.find(e=>void 0===e.parent)},mainHeight(){return this.rootBox?this.rootBox.h+100+"px":null},boxLineColStyle(){if(this.cBox){const e=this.boxMap[this.cBox];return e.lw?null:{left:e.x+e.w-10+"px",top:e.y+10+"px",height:e.h-20+"px"}}return null},boxLineRowStyle(){if(this.cBox){const e=this.boxMap[this.cBox];return e.lw?{top:e.y+e.h-10+"px",left:e.lx+10+"px",width:e.lw-20+"px"}:{top:e.y+e.h-10+"px",left:e.x+10+"px",width:e.w-20+"px"}}return null}},watch:{boxs(){this.$emit("update")}},methods:{lockWidth(e){if(this.cBox){const t=this.boxMap[this.cBox];e>t.w?this.$message.error("锁定宽度不能大于原宽度"):(t.lx=t.x+(t.w-e)/2,t.lw=e,this.boxs.splice(this.boxs.findIndex(e=>e.id===t.id),t))}else this.$message.error("请选择区域操作！")},autoAddRow(e){if(e.parent){const t=this.boxMap[e.parent];"col"===t.mode?this.autoAddRow(t):"row"===t.mode&&(this.resizeBoxH(t,t.h+100),this.boxs.filter(t=>t.parent===e.parent&&t.y>e.y).forEach(e=>{this.autoYBox(e,100)}),this.boxs.splice(this.boxs.findIndex(t=>t.id===e.id)+1,0,{id:Object(Ie["a"])().replace(/-/g,""),x:e.x,y:e.y+e.h,w:t.w,h:100,parent:t.id}))}else{const t={id:Object(Ie["a"])().replace(/-/g,""),x:e.x,y:e.y,w:e.w,h:e.h+100,mode:"row"};this.boxs.splice(0,0,{id:Object(Ie["a"])().replace(/-/g,""),x:e.x,y:e.y+e.h,w:e.w,h:100,parent:t.id},t),e.parent=t.id}},addRow(){this.cBox?this.autoAddRow(this.boxMap[this.cBox]):this.$message.error("请选择区域操作！")},lineDragStart(e){this.lineType=e},clearRoot(){this.rootBox&&(this.boxs.splice(0,this.boxs.length,{id:this.rootBox.id,x:0,y:0,w:this.$el.clientWidth,h:this.rootBox.h}),this.cBox=this.rootBox.id)},handleResize(){this.rootWidth!==this.$el.clientWidth&&(this.rootWidth=this.$el.clientWidth,this.autoWidthBox(this.rootBox,this.$el.clientWidth))},boxSelect(){this.$emit("boxSelect")},addWidget(e,t){const i=this.boxMap[this.cBox];i.component={name:e,params:t},this.cBox=null,this.$set(this.boxs,this.boxs.findIndex(e=>e.id===this.cBox),i)},menuShow(e,t){this.cBox=e,this.$emit("boxRightClick",t)},boxStyle(e){return e.lw?{top:e.y+"px",left:e.lx+"px",width:e.lw+"px",height:e.h+"px"}:{top:e.y+"px",left:e.x+"px",width:e.w+"px",height:e.h+"px"}},boxClick(e){this.cBox=e.id,this.$emit("boxClick",e)},autoWidthBox(e,t){if(console.log(111),t!==e.w){const i=this.boxs.filter(t=>t.parent===e.id);if(e.lw){t<e.lw&&(t=e.lw);const n=e.x+(t-e.lw)/2-e.lx;i.forEach(e=>{this.autoXBox(e,n)}),e.lx+=n}else{const n=t/e.w;"row"===e.mode?i.forEach(t=>{t.x=e.x,this.autoWidthBox(t,t.w*n)}):"col"===e.mode&&i.forEach(e=>{e.x=e.x*n,this.autoWidthBox(e,e.w*n)})}e.w=t}},autoXBox(e,t){this.boxs.filter(t=>t.parent===e.id).forEach(e=>{this.autoXBox(e,t)}),e.x+=t},autoYBox(e,t){this.boxs.filter(t=>t.parent===e.id).forEach(e=>{this.autoYBox(e,t)}),e.y+=t},resizeBoxW(e,t){if(t<this.minW&&(t=this.minW),e.w!==t)if(e.parent){const i=this.boxMap[e.parent],n=this.boxs.filter(t=>t.parent===e.parent&&t.id!==e.id),s=n.map(e=>e.w);if("col"===i.mode){let o=t-e.w;if(i.lw){const n=s.reduce((e,t)=>e+t);t+n>i.lw&&(o=i.lw-n-e.w)}else{const e=i.w;this.resizeBoxW(i,i.w+o),o>i.w-e&&(o=i.w-e)}0!==o&&(n.filter(t=>t.x>e.x).forEach(e=>{this.autoXBox(e,o)}),e.w+=o)}else if("row"===i.mode)if(i.lw)t<i.lw?e.w=t:e.w=i.lw;else{const n=Math.max(t,...s);this.resizeBoxW(i,n),t<i.w?e.w=t:e.w=i.w}}else t<this.$el.clientWidth?e.w=t:e.w=this.$el.clientWidth},resizeBoxH(e,t){if(t<this.minH&&(t=this.minH),e.h!==t)if(e.parent){const i=this.boxMap[e.parent],n=this.boxs.filter(t=>t.parent===e.parent&&t.id!==e.id);if("row"===i.mode){const s=t-e.h;this.resizeBoxH(i,i.h+s),n.filter(t=>t.y>e.y).forEach(e=>{this.autoYBox(e,s)}),e.h+=s}else if("col"===i.mode){const s=Math.max(t,...n.map(e=>e.h));this.resizeBoxH(i,s),e.h=t}}else this.$el.parentElement.scrollBy(0,t-e.h),e.h=t},handleDrag(e){if(this.lineType){const t=this.$el.getBoundingClientRect(),i=this.boxMap[this.cBox],n=e.clientX-t.left-i.x,s=e.clientY-t.top-i.y;"col"===this.lineType?this.resizeBoxW(i,n):"row"===this.lineType&&this.resizeBoxH(i,s),this.bBoxTimeout&&clearTimeout(this.bBoxTimeout),this.bBoxTimeout=setTimeout(()=>{this.boxs.splice(0,this.boxs.length,...this.boxs)},300)}},handleDragEnd(){this.lineType=null},handleLeave(){this.lineType=null},splitBoxH(){const e=this.boxMap[this.cBox],t=e.lw?e.lx:e.x,i=e.lw?e.lw:e.w,n={id:Object(Ie["a"])().replace(/-/g,""),x:t,y:e.y,w:i,h:e.h/2,parent:e.id},s={id:Object(Ie["a"])().replace(/-/g,""),x:t,y:e.y+e.h/2,w:i,h:e.h/2,parent:e.id};this.boxs.push(n,s),e.mode="row",this.cBox=n.id},splitBoxV(){const e=this.boxMap[this.cBox],t=e.lw?e.lx:e.x,i=e.lw?e.lw:e.w,n={id:Object(Ie["a"])().replace(/-/g,""),x:t,y:e.y,w:i/2,h:e.h,parent:e.id},s={id:Object(Ie["a"])().replace(/-/g,""),x:t+i/2,y:e.y,w:i/2,h:e.h,parent:e.id};this.boxs.push(n,s),e.mode="col",this.cBox=n.id},deleteBox(){const e=this.boxMap[this.cBox];if(e.id===this.rootBox.id)this.$message.error("不能删除根节点");else{const t=this.boxMap[e.parent],i=this.boxs.filter(t=>t.parent===e.parent&&t.id!==e.id);if("col"===t.mode?(i.filter(t=>t.x>e.x).forEach(t=>{this.autoXBox(t,-e.w)}),this.resizeBoxW(t,t.w-e.w)):"row"===t.mode&&(i.filter(t=>t.y>e.y).forEach(t=>{this.autoYBox(t,-e.h)}),this.resizeBoxH(t,t.h-e.h)),1===i.length){const e=i[0];t.id===this.rootBox.id?delete e.parent:e.parent=t.parent,this.boxs.splice(this.boxs.findIndex(e=>e.id===t.id),1)}this.boxs.splice(this.boxs.findIndex(t=>t.id===e.id),1),this.cBox=null}}}},Fe=Le,We=(i("74f5"),i("2877")),Ae=Object(We["a"])(Fe,Ne,Pe,!1,null,"48c3f2de",null),Ue=Ae.exports,Xe=i("571f"),ze=i("ca00"),Ye={data(){return{siteId:this.$route.params.sid,siteName:"无标题",editTitle:!1,autoSaveText:"",sidebarType:null,sidebarVisible:!1,splitValue:0,boxs:[],toolType:null,contentMenu:{},contentMenuVisible:!1,historys:[],hisIndex:0,useHistory:!1}},components:{TBox:Ue,[_e.name]:_e,[re["a"].name]:re["a"],[ae["a"].name]:ae["a"],[ae["a"].Item.name]:ae["a"].Item,[ae["a"].SubMenu.name]:ae["a"].SubMenu,[ae["a"].Divider.name]:ae["a"].Divider,[oe.name]:oe},created(){this.siteId&&Object(Xe["a"])(this.siteId).then(e=>{if(0===e.errcode){const t=e.data;this.siteName=t.name,this.boxs=t.boxs}else this.$message.error(e.errmsg)}),document.title=this.siteName},computed:{sidebarTitle(){return"widget"===this.sidebarType?"选择组件":"test"===this.sidebarType?"测试":"history"===this.sidebarType?"历史记录":""},canHisRevoke(){return this.historys.length>0&&this.hisIndex>0},canHisRedo(){return this.historys.length-this.hisIndex>1}},methods:{lock(){this.$refs.sbox.lockWidth(800)},addRow(){this.$refs.sbox.addRow()},mainClick(){this.contentMenuVisible=!1},hisRevoke(){this.useHistory=!0,this.hisIndex-=1;const e=this.historys[this.hisIndex].boxs;this.boxs=JSON.parse(JSON.stringify(e))},hisRedo(){this.useHistory=!0,this.hisIndex+=1;const e=this.historys[this.hisIndex].boxs;this.boxs=JSON.parse(JSON.stringify(e))},contentMenuClick(e){"vv"===e?this.vv():"hh"===e?this.hh():"remove"===e?this.remove():"add"===e&&this.addRow(),this.contentMenuVisible=!1},boxSelect(){this.sidebarVisible=!0,this.sidebarType="widget"},addWidget(e){this.$refs.sbox.addWidget(e),this.sidebarVisible=!1},_getPosition(e){const t=this.$el.getBoundingClientRect();return{ex:e.clientX-t.left,ey:e.clientY-t.top}},boxRightClick(e){const{ex:t,ey:i}=this._getPosition(e);this.contentMenu={top:i+"px",left:t+"px"},this.contentMenuVisible=!0},boxClick(){this.toolType="box",this.contentMenuVisible=!1},goback(){this.$router.replace("/site")},mainUpdate(){Object(Xe["f"])({id:this.siteId,name:this.siteName,boxs:this.boxs}).then(()=>{const e=(new Date).getTime();if(this.autoSaveText="自动保存："+Object(ze["e"])(e),this.useHistory)this.useHistory=!1;else{const t=JSON.parse(JSON.stringify(this.boxs));this.historys.splice(this.hisIndex+1,this.historys.length-1-this.hisIndex,{boxs:t,time:e}),this.hisIndex=this.historys.length-1}})},showSidebar(e){this.sidebarType=e,this.sidebarVisible=!0},rename(){this.editTitle=!0,this.$nextTick(()=>{this.$refs.title.focus(),this.$refs.title.select()})},hh(){this.$refs.sbox.splitBoxH()},vv(){this.$refs.sbox.splitBoxV()},remove(){this.$refs.sbox.deleteBox()},lineMove(e){this.splitValue=Math.round(e)},lineDown(){this.toolType="line",this.contentMenuVisible=!1},lineClick(e){this.splitValue=Math.round(e.pc)},publish(){Object(Xe["e"])({id:this.siteId,name:this.siteName})},titleInputBlur(){this.editTitle=!1},clickTitle(){this.editTitle=!0,this.$nextTick(()=>{this.$refs.title.focus()})},clearMain(){this.$refs.sbox.clearRoot()},sidebarClose(){this.sidebarVisible=!1}}},Je=Ye,Ke=(i("02b1"),Object(We["a"])(Je,n,s,!1,null,"5481aaf5",null));t["default"]=Ke.exports},"313c":function(e,t,i){},"325f":function(e,t,i){},"571f":function(e,t,i){"use strict";i.d(t,"c",(function(){return s})),i.d(t,"e",(function(){return o})),i.d(t,"f",(function(){return a})),i.d(t,"b",(function(){return r})),i.d(t,"a",(function(){return l})),i.d(t,"d",(function(){return h}));var n=i("b775");function s(){return n["b"].get("/templates")}function o(e){return n["b"].post("/publish/site",e)}function a(e){return n["b"].post("/save/site",e)}function r(){return n["b"].get("/sites")}function l(e){return n["b"].get("/site",{params:{id:e}})}function h(e){return n["b"].post("/init/site",e)}},"5cdc":function(e,t,i){},"74f5":function(e,t,i){"use strict";var n=i("a9b7"),s=i.n(n);s.a},"7b81":function(e,t,i){},"9a33":function(e,t,i){"use strict";i("b2a3"),i("b8e7")},a9b7:function(e,t,i){},b8e7:function(e,t,i){},ec26:function(e,t,i){"use strict";var n="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),s=new Uint8Array(16);function o(){if(!n)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(s)}for(var a=[],r=0;r<256;++r)a.push((r+256).toString(16).substr(1));function l(e,t){var i=t||0;return(a[e[i+0]]+a[e[i+1]]+a[e[i+2]]+a[e[i+3]]+"-"+a[e[i+4]]+a[e[i+5]]+"-"+a[e[i+6]]+a[e[i+7]]+"-"+a[e[i+8]]+a[e[i+9]]+"-"+a[e[i+10]]+a[e[i+11]]+a[e[i+12]]+a[e[i+13]]+a[e[i+14]]+a[e[i+15]]).toLowerCase()}var h=l;function u(e,t,i){e=e||{};var n=e.random||(e.rng||o)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){i=i||0;for(var s=0;s<16;++s)t[i+s]=n[s];return t}return h(n)}t["a"]=u},fbd8:function(e,t,i){"use strict";i("b2a3"),i("325f"),i("9a33")}}]);